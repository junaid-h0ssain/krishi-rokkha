<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ржмрж╛ржВрж▓рж╛ ржнржпрж╝рзЗрж╕ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 28px; }
        h1 { font-size: 2.2em; margin-bottom: 4px }
        p.lead { color: #333; margin-top: 0 }
        .controls { margin: 18px 0 }
        button.btn { padding: 10px 18px; font-size: 16px; cursor: pointer; margin: 6px }
        .status { margin-top: 10px; color: #2a7; font-weight: 600 }
        .error { color: #b33 }
        .question { margin: 14px 0; font-size: 1.1em }
        .examples { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:12px }
        .example { background:#f0f0f0; padding:8px 12px; border-radius:6px; cursor:pointer }
        .answer { margin-top: 18px; font-size:1.15em; color:#145c2b }
        .hint { margin-top: 8px; color:#666 }
        input[type="text"] { padding:8px; width:60%; max-width:420px }
        @media (max-width:480px){ input[type="text"]{ width:100% } }
        .lang-toggle { margin: 10px 0; }
        .lang-btn { padding: 6px 12px; margin: 0 3px; border: 1px solid #ddd; background: #f8f9fa; cursor: pointer; }
        .lang-btn.active { background: #007bff; color: white; }
        .nav { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: #007bff; color: white; }
        .nav-logo { font-size: 1.5em; font-weight: bold; }
        .nav-links { display: flex; gap: 15px; }
        .nav-links a { color: white; text-decoration: none; }
        .nav-buttons { display: flex; gap: 10px; }
        .nav-cta { padding: 8px 16px; border: none; border-radius: 4px; background: #ffc107; color: #333; cursor: pointer; }
        .nav-cta:hover { background: #e0a800; }
    </style>
</head>
<body>
    <header class="nav">
        <a href="/welcome.html" class="nav-logo" style="text-decoration: none; color: inherit; cursor: pointer;">KrishiRokkha</a>
        <nav class="nav-links">
            <a href="/about.html" data-i18n="nav-features">About Us</a>
            <a href="/farmer_stories.html" data-i18n="nav-impact">Testimonies</a>
            <a href="/our_research.html" data-i18n="nav-about">Research</a>
        </nav>
        <div class="nav-buttons">
            <button id="lang-toggle" class="nav-cta">
                <span id="lang-text">ржмрж╛ржВрж▓рж╛</span>
            </button>
            <button id="enter-app-btn" class="nav-cta" data-i18n="nav-enter">Enter App</button>
        </div>
    </header>

    <h1>ржмрж╛ржВрж▓рж╛ ржнржпрж╝рзЗрж╕ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕</h1>
    <p class="lead">ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржи тАФ рж╕рзНржкрж░рзНрж╢ ржЫрж╛ржбрж╝рж╛ржЗ ржХржерж╛ ржмрж▓рзБржи ржмрж╛ ржирж┐ржЪрзЗ ржЯрж╛ржЗржк ржХрж░рзЗ ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржиред</p>
    
    <div class="lang-toggle">
        <button class="lang-btn active" id="lang-bn">ржмрж╛ржВрж▓рж╛</button>
        <button class="lang-btn" id="lang-en">English</button>
    </div>
    
    <div style="background:#fff3cd; border:1px solid #ffeaa7; padding:10px; margin:10px 0; border-radius:5px;" id="tip-box">
        <strong>ЁЯТб рж╕рж╣ржЬ ржЙржкрж╛ржпрж╝:</strong> ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржмрж╛ ржЯрзЗржХрзНрж╕ржЯ ржмржХрзНрж╕рзЗ ржЯрж╛ржЗржк ржХрж░рзБржи тАФ ржнржпрж╝рзЗрж╕ рж╕ржорж╕рзНржпрж╛ ржерж╛ржХрж▓рзЗ ржПржЧрзБрж▓рзЛ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп!
    </div>

    <div class="controls">
        <button class="btn" id="toggle-recognition">рж╢рзБржирзБржи (рж╢рзБрж░рзБ)</button>
        <button class="btn" id="stop-recognition">ржмржирзНржз ржХрж░рзБржи</button>
        <div class="status" id="status">ржкрзНрж░рж╕рзНрждрзБрждред</div>
    </div>

    <div class="hint">ржЙржжрж╛рж╣рж░ржг ржмрж▓рзЗ ржжрзЗржЦрзБржи ржмрж╛ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:</div>
    <div class="examples" id="examples">
        <div class="example">ржЖржЬржХрзЗрж░ ржЖржмрж╣рж╛ржУрзЯрж╛</div>
        <div class="example">ржЖржорж╛рж░ ржзрж╛ржирзЗрж░ ржЕржмрж╕рзНржерж╛</div>
        <div class="example">ржЧрзБржжрж╛ржорзЗ ржХрзА ржХрж░ржм</div>
        <div class="example">ржХржмрзЗ ржХрж╛ржЯржм</div>
        <div class="example">ржЬржорж┐рж░ ржЦржмрж░</div>
    </div>

    <div class="question" id="question">ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред</div>
    <div class="answer" id="answer">ржЙрждрзНрждрж░ ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред</div>

    <div style="margin-top:18px">
        <div class="hint">ржлрж▓рж╛ржлрж▓ рж╢рзБржирждрзЗ ржирж╛ ржкрж╛рж░рж▓рзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржЕржирзБржорждрж┐ ржжрж┐ржи ржПржмржВ Chrome/Edge ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред</div>
        <div style="margin-top:8px">
            <input id="text-input" type="text" placeholder="ржПржЦрж╛ржирзЗ ржЯрж╛ржЗржк ржХрж░рзЗ ржкрзНрж░рж╢рзНржи ржХрж░рзБржи (ржмрж╛ржВрж▓рж╛)" />
            <button class="btn" id="ask-text">ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛</button>
        </div>
    </div>

    <button class="btn" onclick="window.open('/aiScan.html', '_blank')" style="margin-top: 10px; padding: 10px 18px; background: #f6ad55; color: white; border: none; border-radius: 4px; cursor: pointer;">
        AI Scan Interface
    </button>

    <script>
        // Current language (default: Bangla)
        let currentLang = 'bn';
        
        // Multilingual Q->A mapping
        const qaData = {
            bn: [
            {answers: ["ржЖржЬржХрзЗрж░ ржЖржмрж╣рж╛ржУрзЯрж╛ ржХрзЗржоржи?","ржЖржЬржХрзЗрж░ ржЖржмрж╣рж╛ржУрзЯрж╛","ржЖржмрж╣рж╛ржУрзЯрж╛"], reply: "ржЖржЬржХрзЗрж░ ржЖржмрж╣рж╛ржУрзЯрж╛ ржЖржВрж╢рж┐ржХ ржорзЗржШрж▓рж╛ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ; ржмрзГрж╖рзНржЯрж┐ рж╣рж▓рзЗ ржЦрзЗрждрзЗ ржХрж╛ржЬ ржмржирзНржз рж░рж╛ржЦрзБржи ржПржмржВ ржЬрж▓ ржирж┐рж╖рзНржХрж╛рж╢ржирзЗрж░ ржмрзНржпржмрж╕рзНржерж╛ ржХрж░рзБржиред"},
            {answers: ["ржЖржорж╛рж░ ржзрж╛ржирзЗрж░ ржЕржмрж╕рзНржерж╛","ржзрж╛ржирзЗрж░ ржЕржмрж╕рзНржерж╛","ржЖржорж╛рж░ ржлрж╕рж▓"], reply: "ржЖржорж╛рж░ ржорзВрж▓рзНржпрж╛ржпрж╝ржи ржЕржирзБржпрж╛ржпрж╝рзА ржзрж╛ржирзЗрж░ ржЕржмрж╕рзНржерж╛ ржнрж╛рж▓рзЛред ржкрж╛рждрж╛ржпрж╝ рж╣рж▓ржжрзЗржЯрзЗ ржжрж╛ржЧ ржмрж╛ ржкрзЛржХрж╛рж░ ржЖржХрзНрж░ржоржг ржерж╛ржХрж▓рзЗ ржирж┐ржХржЯрж╕рзНрже ржХрзГрж╖рж┐ ржЕржлрж┐рж╕рзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред"},
            {answers: ["ржЧрзБржжрж╛ржорзЗ ржХрзА ржХрж░ржм","ржЧрзБржжрж╛ржо рж╕ржВрж░ржХрзНрж╖ржг","рж╢рж╕рзНржп рж╕ржВрж░ржХрзНрж╖ржг"], reply: "ржЧрзБржжрж╛ржо ржврзЗржХрзЗ ржПржмржВ рж╢рзБрж╖рзНржХ ржкрж░рж┐ржмрзЗрж╢рзЗ рж░рж╛ржЦрзБржиред ржкржЪрж╛ рж╣ржУржпрж╝рж╛ ржЕржВрж╢ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж░рж╛ржЦрзБржи, ржПржмржВ ржирж┐ржпрж╝ржорж┐ржд ржЖрж░рзНржжрзНрж░рждрж╛ ржЪрзЗржХ ржХрж░рзБржиред"},
            {answers: ["ржХржмрзЗ ржХрж╛ржЯржм","ржХрж╛ржЯрж╛ ржХржмрзЗ","ржХржЦржи ржХрж╛ржЯржм"], reply: "ржзрж╛ржи рж╕рж╛ржзрж╛рж░ржгржд ржжрж╛ржирж╛ рж╢ржХрзНржд рж╣рж▓рзЗ ржУ ржЖрж░рзНржжрзНрж░рждрж╛ ржХржорзЗ рзирзж% ржерзЗржХрзЗ рзирзл% рж╣рж▓рзЗ ржХрж╛ржЯрж╛ ржнрж╛рж▓рзЛред ржЖржкржирж╛рж░ ржзрж╛ржирзЗрж░ ржиржорзБржирж╛ ржжрзЗржЦрзЗ ржирж┐рж╢рзНржЪрж┐ржд рж╣ржУржпрж╝рж╛ ржнрж╛рж▓рзЛред"},
            {answers: ["ржЬржорж┐рж░ ржЦржмрж░","ржорж╛ржарзЗрж░ ржЕржмрж╕рзНржерж╛","ржЬржорж┐ ржХрзЗржоржи"], reply: "ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ ржПржмржВ ржкрзБрж╖рзНржЯрж┐ рж╕ржорзНржпржХ ржЖржЫрзЗред ржпржжрж┐ ржкрзБрж╖рзНржЯрж┐ ржмрж╛ржбрж╝рж╛рждрзЗ ржЪрж╛ржи, рждрж╛рждрзЗ ржЭрзБрж▓рзЗ ржкржбрж╝рзБржитАФржЙржкржпрзБржХрзНржд рж╕рж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред"},
            {answers: ["ржкрзЛржХрж╛рж░ рж╕ржорж╕рзНржпрж╛","ржкрзЛржХрж╛","ржЬрж╛рж░рж╛"], reply: "ржкрзЛржХрж╛рж░ рж▓ржХрзНрж╖ржг ржжрзЗржЦрж╛ ржЧрзЗрж▓рзЗ ржкрзНрж░ржержорзЗ ржорзЗржХрж╛ржирж┐ржХрзНржпрж╛рж▓ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзБржи (ржкрзЛржХрж╛ рж╕рж░рж╛ржи), ржкрзНрж░ржпрж╝рзЛржЬржирзЗ рж╕ржарж┐ржХ ржХрзАржЯржирж╛рж╢ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи тАФ ржирж┐рж╢рзНржЪрж┐ржд рж╣ржи ржирж╛ржо ржУ ржорзЗрж╢рж╛ржирзЛрж░ ржЕржирзБржкрж╛ржд ржЬрж╛ржирждрзЗред"},
            {answers: ["ржХрзЛржи рж╕рж╛рж░ ржжрзЗржм","рж╕рж╛рж░ ржХрзА ржжрзЗржм","ржлрж╛рж░рзНржЯрж┐рж▓рж╛ржЗржЬрж╛рж░"], reply: "рж╕рж╛рж░рзЗрж░ ржкрж░рж┐ржорж╛ржг ржЖржкржирж╛рж░ ржлрж╕рж▓ ржУ ржорж╛ржЯрж┐рж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ; рж╕рж╛ржзрж╛рж░ржгржд ржирж╛ржЗржЯрзНрж░рзЛржЬрзЗржи, ржлрж╕ржлрж░рж╛рж╕ ржУ ржкржЯрж╛рж╢рзЗрж░ рж╕ржоржирзНржмржпрж╝ ржжрж░ржХрж╛рж░ред рж╕рзНржерж╛ржирзАрзЯ ржХрзГрж╖рж┐ ржЕржлрж┐рж╕ ржерзЗржХрзЗ ржорж╛ржЯрж┐рж░ ржкрж░рзАржХрзНрж╖рж╛рж░ ржкрж░рж╛ржорж░рзНрж╢ ржирж┐ржиред"},
            {answers: ["рж╕рзЗржЪ ржХрж┐ржнрж╛ржмрзЗ","ржХрждржЯрж╛ рж╕рзЗржЪ","рж╕рзЗржЪ"], reply: "рж╕рзЗржЪ ╤А╨░╤Б╤В╨╡╨╜╨╕╤Прж░ ржзрж░ржгрзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред ржзрж╛ржирзЗрж░ ржЬржирзНржп ржирж┐ржпрж╝ржорж┐ржд ржХрж┐ржирзНрждрзБ ржЕрждрж┐рж░рж┐ржХрзНржд ржЬрж▓ ржПржбрж╝рж╛ржирзЛ ржЙржЪрж┐ржд; ржмрж╛ржбрж╝рждрж┐ ржЬрж▓ ржерж╛ржХрж▓рзЗ рж╢рж┐ржХржбрж╝ рж░рзЛржЧ ржмрж╛ржбрж╝рждрзЗ ржкрж╛рж░рзЗред"},
            {answers: ["рж░рзЛржЧрзЗрж░ рж▓ржХрзНрж╖ржг","ржлрж╕рж▓ рж░рзЛржЧ","ржкрж╛рждрж╛ржпрж╝ ржжрж╛ржЧ"], reply: "ржкрж╛рждрж╛ржпрж╝ ржжрж╛ржЧ ржмрж╛ ржХржБржХржбрж╝рзЗ ржжрзЗржЦрж╛ ржЧрзЗрж▓рзЗ ржкрзНрж░ржержорзЗ ржЖржХрзНрж░рж╛ржирзНржд ржЕржВрж╢ рж╕рж░рж┐ржпрж╝рзЗ ржлрзЗрж▓рзБржиред ржЧрзБрж░рзБрждрж░ рж╣рж▓рзЗ рж╕рзНржерж╛ржирзАржпрж╝ ржПржиржЯрзЗржирж╢ржи ржЕржлрж┐рж╕ ржмрж╛ ржХрзГрж╖рж┐ ржмрж┐рж╢рзЗрж╖ржЬрзНржЮрзЗрж░ рж╕ржЩрзНржЧрзЗ ржкрж░рж╛ржорж░рзНрж╢ ржХрж░рзБржиред"},
            {answers: ["ржмрж╛ржЬрж╛рж░ ржорзВрж▓рзНржп","ржзрж╛ржирзЗрж░ ржжрж╛ржо","ржХржд ржжрж╛ржорзЗ ржмрж┐ржХрзНрж░рж┐"], reply: "ржмрж╛ржЬрж╛рж░ ржорзВрж▓рзНржп ржПрж▓рж╛ржХрж╛ржнрж┐рждрзНрждрж┐ржХ ржнрж┐ржирзНржи; ржирж┐ржХржЯржмрж░рзНрждрзА ржмрж╛ржЬрж╛рж░рзЗрж░ рж╣рж╛рж▓ржирж╛ржЧрж╛ржж ржЬржирзНржп ржорзЛржмрж╛ржЗрж▓рзЗ ржмрж╛ ржмрж╛ржЬрж╛рж░ ржлрж┐рж░рзЛржЬрзЗ ржЪрзЗржХ ржХрж░рзБржиред ржЖржорж┐ ржЖржкржирж╛рж░ ржЬржирзНржп ржмрж╛ржЬрж╛рж░ API ржЗржирзНржЯрж┐ржЧрзНрж░рзЗржЯ ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржпржжрж┐ ржЖржкржирж┐ ржЪрж╛ржиред"},
            {answers: ["ржкрзЛрж╕рзНрждрж╛ ржЫрж╛ржкрж╛","ржкрзЗрж╕рзНржЯрж┐рж╕рж╛ржЗржб ржмрж┐ржзрж┐","рж░рзЛржЧ ржкрзНрж░рждрж┐рж░рзЛржз"], reply: "ржХрзАржЯржирж╛рж╢ржХ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕ржоржпрж╝ рж▓рзЗржмрзЗрж▓ ржорзЗржирзЗ ржЪрж▓рзБржи, ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржкрзНрж░рждрж┐рж░ржХрзНрж╖рж╛ржорзВрж▓ржХ ржкрзЛрж╢рж╛ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи ржПржмржВ ржлрж╕рж▓ ржмрж┐ржХрзНрж░рж┐рж░ ржЖржЧрзЗ ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд рж░ржХрзНрж╖ржгрж╛ржмрзЗржХрзНрж╖ржг рж╕ржоржпрж╝ ржорзЗржирзЗ ржЪрж▓рзБржиред"},
            {answers: ["ржмржкржи рж╕ржоржпрж╝","ржмржкржи ржХржЦржи","ржмрзАржЬ ржмржкржи"], reply: "ржмржкржи рж╕ржоржпрж╝ ржЕржЮрзНржЪрж▓рзЗрж░ ржЛрждрзБ ржУ ржмрзГрж╖рзНржЯрж┐ржкрж╛рждрзЗрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред рж╕рзНржерж╛ржирзАржпрж╝ ржХрзГрж╖рж┐ ржЕржлрж┐рж╕ ржерзЗржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржоржпрж╝ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи; рж╕рж╛ржзрж╛рж░ржгржд ржорзМрж╕рзБржорзЗрж░ рж╢рзБрж░рзБрждрзЗ ржмржкржи ржХрж░рж╛ ржнрж╛рж▓ред"}
            ],
            en: [
                {answers: ["today's weather","weather today","weather"], reply: "Today's weather is partly cloudy. If it rains, stop field work and ensure proper drainage."},
                {answers: ["rice condition","my crops","crop status"], reply: "Based on my assessment, your rice condition is good. If you see yellow spots or pest attacks, contact your local agriculture office."},
                {answers: ["storage","warehouse","grain storage"], reply: "Store grains covered and in dry environment. Separate any spoiled portions and regularly check moisture levels."},
                {answers: ["when to harvest","harvest time","when to cut"], reply: "Rice is usually ready when grains are firm and moisture drops to 20-25%. Check your rice samples to be sure."},
                {answers: ["field condition","soil status","land condition"], reply: "Soil moisture and nutrients seem adequate. If you want to increase nutrients, use appropriate fertilizers."},
                {answers: ["pest problem","insects","pests"], reply: "If you see pest symptoms, first try mechanical control (remove pests), then use proper pesticides - make sure you know the name and mixing ratio."},
                {answers: ["fertilizer","what fertilizer","fertilizer type"], reply: "Fertilizer amount depends on your crop and soil; usually needs combination of nitrogen, phosphorus and potash. Get soil testing advice from local agriculture office."},
                {answers: ["irrigation","watering","water management"], reply: "Irrigation depends on plant type. For rice, regular but avoid excess water; too much water can increase root diseases."},
                {answers: ["disease symptoms","crop disease","leaf spots"], reply: "If you see spots or wilting on leaves, first remove affected parts. For serious cases, consult local extension office or agriculture experts."},
                {answers: ["market price","rice price","selling price"], reply: "Market prices vary by area; check mobile apps or local markets for current updates. I can integrate market API for you if needed."},
                {answers: ["pesticide safety","pesticide rules","disease prevention"], reply: "When using pesticides, follow label instructions, wear protective clothing and observe recommended waiting time before selling crops."},
                {answers: ["planting time","sowing time","when to plant"], reply: "Planting time depends on regional seasons and rainfall patterns. Confirm specific timing from local agriculture office; usually best at season start."}
            ]
        };
        
        // UI Text translations
        const uiText = {
            bn: {
                title: "ржмрж╛ржВрж▓рж╛ ржнржпрж╝рзЗрж╕ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕",
                subtitle: "ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржи тАФ рж╕рзНржкрж░рзНрж╢ ржЫрж╛ржбрж╝рж╛ржЗ ржХржерж╛ ржмрж▓рзБржи ржмрж╛ ржирж┐ржЪрзЗ ржЯрж╛ржЗржк ржХрж░рзЗ ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржиред",
                tipText: "ЁЯТб рж╕рж╣ржЬ ржЙржкрж╛ржпрж╝: ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржмрж╛ ржЯрзЗржХрзНрж╕ржЯ ржмржХрзНрж╕рзЗ ржЯрж╛ржЗржк ржХрж░рзБржи тАФ ржнржпрж╝рзЗрж╕ рж╕ржорж╕рзНржпрж╛ ржерж╛ржХрж▓рзЗ ржПржЧрзБрж▓рзЛ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп!",
                startBtn: "рж╢рзБржирзБржи (рж╢рзБрж░рзБ)",
                stopBtn: "ржмржирзНржз ржХрж░рзБржи",
                listening: "рж╢рзБржиржЫрзЗ...",
                ready: "ржкрзНрж░рж╕рзНрждрзБрждред",
                examplesHint: "ржЙржжрж╛рж╣рж░ржг ржмрж▓рзЗ ржжрзЗржЦрзБржи ржмрж╛ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:",
                questionPlaceholder: "ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред",
                answerPlaceholder: "ржЙрждрзНрждрж░ ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред",
                inputPlaceholder: "ржПржЦрж╛ржирзЗ ржЯрж╛ржЗржк ржХрж░рзЗ ржкрзНрж░рж╢рзНржи ржХрж░рзБржи (ржмрж╛ржВрж▓рж╛)",
                askBtn: "ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛",
                examples: ["ржЖржЬржХрзЗрж░ ржЖржмрж╣рж╛ржУржпрж╝рж╛","ржЖржорж╛рж░ ржзрж╛ржирзЗрж░ ржЕржмрж╕рзНржерж╛","ржЧрзБржжрж╛ржорзЗ ржХрзА ржХрж░ржм","ржХржмрзЗ ржХрж╛ржЯржм","ржЬржорж┐рж░ ржЦржмрж░"]
            },
            en: {
                title: "Multilingual Voice Interface",
                subtitle: "Ask your questions тАФ speak hands-free or type below.",
                tipText: "ЁЯТб Easy way: Click the examples below or use the text box тАФ these are reliable when voice has issues!",
                startBtn: "Listen (Start)",
                stopBtn: "Stop",
                listening: "Listening...",
                ready: "Ready.",
                examplesHint: "Try saying or click these examples:",
                questionPlaceholder: "Your question will appear here.",
                answerPlaceholder: "Answer will appear here.",
                inputPlaceholder: "Type your question here (English)",
                askBtn: "Ask",
                examples: ["Today's weather","My rice condition","Storage advice","When to harvest","Field condition"],
            }
        };

        function findAnswer(text){
            if(!text) return null;
            const t = text.toLowerCase();
            const qa = qaData[currentLang];
            for(const item of qa){
                for(const k of item.answers){
                    if(t.includes(k.replace(/\s+/g,'').toLowerCase()) || t.includes(k.toLowerCase())){
                        return item.reply;
                    }
                }
            }
            return null;
        }
        
        // Update UI based on current language
        function updateUI() {
            const texts = uiText[currentLang];
            document.querySelector('h1').textContent = texts.title;
            document.querySelector('p.lead').textContent = texts.subtitle;
            document.querySelector('#tip-box').innerHTML = '<strong>' + texts.tipText + '</strong>';
            document.querySelector('#toggle-recognition').textContent = texts.startBtn;
            document.querySelector('#stop-recognition').textContent = texts.stopBtn;
            document.querySelector('#status').textContent = texts.ready;
            document.querySelector('.hint').textContent = texts.examplesHint;
            document.querySelector('#question').textContent = texts.questionPlaceholder;
            document.querySelector('#answer').textContent = texts.answerPlaceholder;
            document.querySelector('#text-input').placeholder = texts.inputPlaceholder;
            document.querySelector('#ask-text').textContent = texts.askBtn;
            
            // Update examples
            const examplesEl = document.querySelector('#examples');
            examplesEl.innerHTML = '';
            texts.examples.forEach(example => {
                const div = document.createElement('div');
                div.className = 'example';
                div.textContent = example;
                examplesEl.appendChild(div);
            });
            
            // Update recognition language
            if(recognition) {
                recognition.lang = currentLang === 'bn' ? 'bn-BD' : 'en-US';
            }
        }

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const synth = window.speechSynthesis;
        let recognition = null;
        const statusEl = document.getElementById('status');
        const startBtn = document.getElementById('toggle-recognition');
        const stopBtn = document.getElementById('stop-recognition');
        const questionEl = document.getElementById('question');
        const answerEl = document.getElementById('answer');
        const examplesEl = document.getElementById('examples');
        const textInput = document.getElementById('text-input');
        const askTextBtn = document.getElementById('ask-text');

        // Build recognition if available
        if(SpeechRecognition){
            recognition = new SpeechRecognition();
            recognition.lang = 'bn-BD';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
            recognition.continuous = false;

            recognition.addEventListener('start', ()=> {
                const texts = uiText[currentLang];
                statusEl.textContent = currentLang === 'bn' ? 'рж╢рзБржиржЫрзЗ... ржмрж▓рзЗржи ржПржЦржиред' : 'Listening... speak now.';
                startBtn.textContent = texts.listening;
                startBtn.disabled = true;
            });
            recognition.addEventListener('end', ()=> {
                const texts = uiText[currentLang];
                statusEl.textContent = currentLang === 'bn' ? 'рж╢рзБржирж╛ ржмржирзНржз рж╣ржпрж╝рзЗржЫрзЗред (рж╢рзБрж░рзБ ржХрж░рждрзЗ ржмрзЛрждрж╛ржо ржЪрж╛ржкрзБржи)' : 'Listening stopped. (Click button to start)';
                startBtn.textContent = texts.startBtn;
                startBtn.disabled = false;
            });

            recognition.addEventListener('result', (ev)=>{
                const spoken = ev.results[0][0].transcript.trim();
                const qLabel = currentLang === 'bn' ? 'ржкрзНрж░рж╢рзНржи: ' : 'Question: ';
                const aLabel = currentLang === 'bn' ? 'ржЙрждрзНрждрж░: ' : 'Answer: ';
                const noMatch = currentLang === 'bn' ? 
                    'ржжрзБржГржЦрж┐ржд, ржЖржорж┐ ржарж┐ржХ ржмрзБржЭрждрзЗ ржкрж╛рж░рж┐ржирж┐ред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖрж░рзЗржХржмрж╛рж░ ржмрж▓рзБржи ржмрж╛ ржирж┐ржЪрзЗ ржЯрж╛ржЗржк ржХрж░рзБржиред' :
                    'Sorry, I didn\'t quite understand. Please try again or use the text input below.';
                questionEl.textContent = qLabel + spoken;
                const ans = findAnswer(spoken) || noMatch;
                answerEl.textContent = aLabel + ans;
                speak(ans);
            });

            recognition.addEventListener('error', (ev)=>{
                const texts = uiText[currentLang];
                startBtn.textContent = texts.startBtn;
                startBtn.disabled = false;
                answerEl.innerHTML = '<span class="error">' + (currentLang === 'bn' ? 'рждрзНрж░рзБржЯрж┐: ' : 'Error: ') + ev.error + '</span>';
                if(ev.error === 'not-allowed' || ev.error === 'permission-denied'){
                    statusEl.innerHTML = '<span class="error">' + (currentLang === 'bn' ? 
                        'ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржЕржирзБржорждрж┐ ржжрж░ржХрж╛рж░ тАФ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржарж┐ржХрж╛ржирж╛ржпрж╝ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржЕржирзБржорждрж┐ ржжрж┐ржиред' :
                        'Microphone permission needed тАФ click on browser address bar to grant permission.') + '</span>';
                } else if(ev.error === 'network'){
                    statusEl.innerHTML = '<span class="error">ЁЯФ┤ ' + (currentLang === 'bn' ?
                        'ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржорж╕рзНржпрж╛ тАФ ржнржпрж╝рзЗрж╕ рж╕рж╛рж░рзНржнрж┐рж╕ ржЕржлрж▓рж╛ржЗржирзЗ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛ред ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржг ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржмрж╛ ржЯрзЗржХрзНрж╕ржЯ ржмржХрзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред' :
                        'Network problem тАФ voice service doesn\'t work offline. Click examples below or use text input.') + '</span>';
                } else {
                    statusEl.innerHTML = '<span class="error">' + (currentLang === 'bn' ?
                        'ржнржпрж╝рзЗрж╕ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ тАФ ржЙржжрж╛рж╣рж░ржг ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржмрж╛ ржЯрзЗржХрзНрж╕ржЯ ржЗржиржкрзБржЯ ржжрж┐ржпрж╝рзЗ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред' :
                        'Voice problem тАФ click examples or use text input.') + '</span>';
                }
            });
        } else {
            statusEl.innerHTML = '<span class="error">ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░ Web Speech API (SpeechRecognition) рж╕ржорж░рзНржержи ржХрж░рзЗ ржирж╛ред ржЯрзЗржХрзНрж╕ржЯ ржЗржиржкрзБржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред</span>';
            startBtn.disabled = true;
            stopBtn.disabled = true;
        }

        startBtn.addEventListener('click', ()=>{
            if(!recognition){ return }
            const texts = uiText[currentLang];
            try{ 
                recognition.start(); 
                statusEl.textContent = currentLang === 'bn' ? 'рж╢рзБржирждрзЗ рж╢рзБрж░рзБ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ...' : 'Starting to listen...'; 
                startBtn.textContent = texts.listening;
                startBtn.disabled = true;
            }
            catch(e){ 
                console.warn('start error', e);
                statusEl.innerHTML = '<span class="error">' + (currentLang === 'bn' ?
                    'рж╢рзБрж░рзБ ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ тАФ ржЯрзЗржХрзНрж╕ржЯ ржЗржиржкрзБржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред' :
                    'Problem starting тАФ use text input.') + '</span>';
            }
        });

        stopBtn.addEventListener('click', ()=>{
            if(recognition){ 
                const texts = uiText[currentLang];
                recognition.stop(); 
                statusEl.textContent = currentLang === 'bn' ? 'рж╢рзБржирж╛ ржмржирзНржз ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред' : 'Listening stopped.'; 
                startBtn.textContent = texts.startBtn;
                startBtn.disabled = false;
            }
        });

        examplesEl.addEventListener('click', (ev)=>{
            const t = ev.target;
            if(t.classList.contains('example')){
                const text = t.textContent.trim();
                const qLabel = currentLang === 'bn' ? 'ржкрзНрж░рж╢рзНржи: ' : 'Question: ';
                const aLabel = currentLang === 'bn' ? 'ржЙрждрзНрждрж░: ' : 'Answer: ';
                const noMatch = currentLang === 'bn' ? 
                    'ржжрзБржГржЦрж┐ржд, ржЖржорж┐ ржмрзБржЭрждрзЗ ржкрж╛рж░рж┐ржирж┐ред' :
                    'Sorry, I didn\'t understand.';
                questionEl.textContent = qLabel + text;
                const ans = findAnswer(text) || noMatch;
                answerEl.textContent = aLabel + ans;
                speak(ans);
            }
        });

        askTextBtn.addEventListener('click', ()=>{
            const txt = textInput.value.trim();
            if(!txt){ return }
            const qLabel = currentLang === 'bn' ? 'ржкрзНрж░рж╢рзНржи: ' : 'Question: ';
            const aLabel = currentLang === 'bn' ? 'ржЙрждрзНрждрж░: ' : 'Answer: ';
            const noMatch = currentLang === 'bn' ? 
                'ржжрзБржГржЦрж┐ржд, ржЖржорж┐ ржарж┐ржХ ржмрзБржЭрждрзЗ ржкрж╛рж░рж┐ржирж┐ред' :
                'Sorry, I didn\'t understand that question.';
            questionEl.textContent = qLabel + txt;
            const ans = findAnswer(txt) || noMatch;
            answerEl.textContent = aLabel + ans;
            speak(ans);
        });

        function speak(text){
            if(!synth) return;
            const utt = new SpeechSynthesisUtterance(text);
            utt.lang = currentLang === 'bn' ? 'bn-BD' : 'en-US';
            // try to pick appropriate voice
            const voices = synth.getVoices();
            if(voices && voices.length){
                let voice;
                if(currentLang === 'bn') {
                    voice = voices.find(v=> /bengali|bangla|bn[-_]?bd|ржмрж╛ржВрж▓рж╛/i.test(v.name+v.lang));
                } else {
                    voice = voices.find(v=> /en[-_]?us|english.*us/i.test(v.name+v.lang)) || 
                           voices.find(v=> /english/i.test(v.name));
                }
                if(voice) utt.voice = voice;
            }
            synth.cancel();
            synth.speak(utt);
        }
        
        // Language switching handlers
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('lang-bn').addEventListener('click', () => {
                currentLang = 'bn';
                document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('lang-bn').classList.add('active');
                updateUI();
            });
            
            document.getElementById('lang-en').addEventListener('click', () => {
                currentLang = 'en';
                document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('lang-en').classList.add('active');
                updateUI();
            });
            
            // Initialize UI on page load
            updateUI();
        });

        // Quick usability: press Enter in text input to ask
        textInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') askTextBtn.click(); });

        // Try English fallback when Bangla fails
        function tryEnglishFallback() {
            if (!recognition) return;
            setTimeout(() => {
                statusEl.innerHTML += '<br><span class="hint">ЁЯФД ' + (currentLang === 'bn' ? 
                    'ржЗржВрж░рзЗржЬрж┐рждрзЗ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржЫрж┐ (English fallback)...' :
                    'Trying English fallback...') + '</span>';
                recognition.lang = 'en-US';
                try {
                    recognition.start();
                } catch(e) {
                    statusEl.innerHTML = '<span class="error">' + (currentLang === 'bn' ?
                        'рж╕ржм ржнрж╛рж╖рж╛ржпрж╝ ржмрзНржпрж░рзНрже тАФ ржЙржжрж╛рж╣рж░ржг ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред' :
                        'Failed in all languages тАФ click examples.') + '</span>';
                }
            }, 1000);
        }

        // Initial small hint: supported browsers
        (function initialHint(){
            const ua = navigator.userAgent;
            if(!/Chrome|Chromium|Edge/.test(ua)){
                statusEl.innerHTML += ' <span class="hint">(Chrome/Edge ржП ржнрж╛рж▓рзЛ ржХрж╛ржЬ ржХрж░рзЗ)</span>';
            }
            // Add offline hint
            if(!navigator.onLine){
                statusEl.innerHTML += ' <span class="error">ЁЯУб ржЕржлрж▓рж╛ржЗржи тАФ ржнржпрж╝рзЗрж╕ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛</span>';
            }
        })();
    </script>
</body>
</html>